#!/usr/bin/env rakudo

use Test;
use File::Temp;

my $mixmaster = $*PROGRAM.IO.parent(2).add('bin/mixmaster');
my $root = tempdir;

plan 4;

run $mixmaster, qqw{--root $root setup}, :out;

is $root.IO.d, True, "Creates root directory";
is $root.IO.add("INBOX").d, True, "Creates INBOX directory in root";
is $root.IO.add("ARCHIVE").d, True, "Creates ARCHIVE directory in root";
is $root.IO.add("mixmaster.ini").f, True, "Creates mixmaster.ini in root";

done-testing;
